{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\s044\\\\Documents\\\\revel-market-backend\\\\src\\\\views\\\\User\\\\update.js\";\nimport React, { Component } from 'react';\nimport GOBALS from '../../GOBALS';\nimport { Form, FormGroup, Button, Card, CardHeader, Col, Row, CardBody, Label, Input, CardFooter, CustomInput } from 'reactstrap';\nimport swal from 'sweetalert';\nimport { Link } from 'react-router-dom';\nimport UserModel from '../../models/UserModel';\nimport UploadModel from '../../models/UploadModel';\nvar user_model = new UserModel();\nvar upload_model = new UploadModel();\n\nclass UserUpdate extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      file: null,\n      imagePreviewUrl: '',\n      upload_url: 'user',\n      user_image: ''\n    };\n    this.uploadImage = this.uploadImage.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  async componentDidMount() {\n    const user_code = this.props.match.params.user_code;\n    const user_bycode = await user_model.getUserByUserCode({\n      user_code: user_code\n    });\n    let user = user_bycode.data[0];\n    document.getElementById(\"user_code\").value = user.user_code;\n    document.getElementById(\"user_name\").value = user.user_name;\n    document.getElementById(\"user_lastname\").value = user.user_lastname;\n    document.getElementById(\"user_email\").value = user.user_email;\n    document.getElementById(\"user_tel\").value = user.user_tel;\n    document.getElementById(\"user_username\").value = user.user_username;\n    document.getElementById(\"user_password\").value = user.user_password;\n    document.getElementById(\"user_address\").value = user.user_address;\n    document.getElementById(\"user_image\").value = user.user_image;\n    var user_image = 'no-image.jpg';\n\n    if (user.user_image != '') {\n      user_image = user.user_image;\n    }\n\n    this.setState({\n      user_image: user_image\n    });\n  }\n\n  async uploadImage(file, upload_url) {\n    const formData = new FormData();\n    var res = file.name.split(\".\");\n    formData.append('file_type', '.' + res[res.length - 1]);\n    formData.append('upload_url', upload_url);\n    formData.append('files', file);\n    var res_upload = await upload_model.uploadFile(formData);\n    return res_upload;\n  }\n\n  async deleteImage(url) {\n    await upload_model.fileDelete(url);\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    var arr = {};\n    var user_code = document.getElementById(\"user_code\").value;\n    var user_name = document.getElementById(\"user_name\").value;\n    var user_lastname = document.getElementById(\"user_lastname\").value;\n    var user_email = document.getElementById(\"user_email\").value;\n    var user_tel = document.getElementById(\"user_tel\").value;\n    var user_username = document.getElementById(\"user_username\").value;\n    var user_password = document.getElementById(\"user_password\").value;\n    var user_address = document.getElementById(\"user_address\").value;\n\n    if (user_name == '') {\n      swal({\n        title: \"Warning!\",\n        text: \"Please Enter Your Name \",\n        icon: \"warning\",\n        button: \"Close\"\n      });\n    } else if (user_lastname == '') {\n      swal({\n        title: \"Warning!\",\n        text: \"Please Enter Your Lastname \",\n        icon: \"warning\",\n        button: \"Close\"\n      });\n    } else if (user_email == '') {\n      swal({\n        title: \"Warning!\",\n        text: \"Please Enter Your email \",\n        icon: \"warning\",\n        button: \"Close\"\n      });\n    } else if (user_password == '') {\n      swal({\n        title: \"Warning!\",\n        text: \"Please Enter Your Password \",\n        icon: \"warning\",\n        button: \"Close\"\n      });\n    } else {\n      var user_image = document.getElementById(\"user_image\").value;\n\n      if (this.state.file != null) {\n        var image_name = await this.uploadImage(this.state.file, this.state.upload_url);\n\n        if (image_name.upload_result) {\n          await this.deleteImage(user_image);\n          user_image = image_name.comment_photo_url;\n        }\n      }\n\n      arr['user_code'] = user_code;\n      arr['user_name'] = user_name;\n      arr['user_lastname'] = user_lastname;\n      arr['user_email'] = user_email;\n      arr['user_tel'] = user_tel;\n      arr['user_username'] = user_username;\n      arr['user_password'] = user_password;\n      arr['user_address'] = user_address;\n      arr['user_image'] = user_image;\n      const user = await user_model.updateUserByUserCode(arr);\n\n      if (user.query_result == true) {\n        swal(\"Save success!\", {\n          icon: \"success\"\n        });\n        this.props.history.push('/user');\n      } else {\n        window.confirm(\"เพิ่มข้อมูลไม่สำเร็จ\");\n      }\n    }\n  }\n\n  _handleImageChange(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    if (file != undefined) {\n      reader.onloadend = () => {\n        this.setState({\n          file: file,\n          imagePreviewUrl: reader.result\n        });\n      };\n\n      reader.readAsDataURL(file);\n    }\n  }\n\n  render() {\n    const imagePreviewUrl = this.state.imagePreviewUrl;\n    return React.createElement(\"div\", {\n      class: \"animated fadeIn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      id: \"myForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(CardHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\\u0E07\\u0E32\\u0E19 / Edit User\"), React.createElement(CardBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      row: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D / Name \", React.createElement(\"font\", {\n      color: \"#F00\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"*\"))), React.createElement(Input, {\n      type: \"hidden\",\n      id: \"user_code\",\n      name: \"user_code\",\n      class: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"text\",\n      id: \"user_name\",\n      name: \"user_name\",\n      class: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      class: \"help-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"Example : \\u0E27\\u0E34\\u0E19\\u0E31\\u0E22.\"))), React.createElement(Col, {\n      lg: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"\\u0E19\\u0E32\\u0E21\\u0E2A\\u0E01\\u0E38\\u0E25 / Lastname \", React.createElement(\"font\", {\n      color: \"#F00\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"*\"))), React.createElement(Input, {\n      type: \"text\",\n      id: \"user_lastname\",\n      name: \"user_lastname\",\n      class: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      class: \"help-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Example : \\u0E0A\\u0E32\\u0E0D\\u0E0A\\u0E31\\u0E22.\"))), React.createElement(Col, {\n      lg: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \" \\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\\u0E4C / Email \"), React.createElement(Input, {\n      type: \"text\",\n      id: \"user_email\",\n      name: \"user_email\",\n      type: \"email\",\n      class: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      class: \"help-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Example : admin@revelsoft.co.th.\"))), React.createElement(Col, {\n      lg: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"\\u0E42\\u0E17\\u0E23\\u0E28\\u0E31\\u0E1E\\u0E17\\u0E4C / Mobile \"), React.createElement(Input, {\n      type: \"text\",\n      id: \"user_tel\",\n      name: \"user_tel\",\n      type: \"text\",\n      class: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      class: \"help-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"Example : 0610243003.\"))), React.createElement(Col, {\n      lg: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"\\u0E22\\u0E39\\u0E2A\\u0E40\\u0E0B\\u0E2D\\u0E23\\u0E4C / Username \", React.createElement(\"font\", {\n      color: \"#F00\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"*\"))), React.createElement(Input, {\n      type: \"text\",\n      id: \"user_username\",\n      name: \"user_username\",\n      class: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      id: \"alert_user_username\",\n      class: \"help-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Example : thana.\"))), React.createElement(Col, {\n      lg: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19 / Password \", React.createElement(\"font\", {\n      color: \"#F00\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"*\"))), React.createElement(Input, {\n      type: \"text\",\n      id: \"user_password\",\n      name: \"user_password\",\n      type: \"password\",\n      class: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      id: \"alert_user_password\",\n      class: \"help-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, \"Example : thanaadmin.\")))), React.createElement(FormGroup, {\n      row: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48 / Address \", React.createElement(\"font\", {\n      color: \"#F00\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"*\")), \" \"), React.createElement(Input, {\n      type: \"textarea\",\n      id: \"user_address\",\n      name: \"user_address\",\n      class: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      class: \"help-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, \"Example : 271/55.\")))), React.createElement(FormGroup, {\n      row: true,\n      style: {\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"\\u0E2D\\u0E31\\u0E1E\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E20\\u0E32\\u0E1E\"), imagePreviewUrl != '' ? React.createElement(\"img\", {\n      className: \"imgesupload\",\n      src: imagePreviewUrl,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }) : React.createElement(\"img\", {\n      className: \"imgesupload\",\n      src: GOBALS.URL_IMG + this.state.user_image,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }), React.createElement(CustomInput, {\n      key: \"key\",\n      type: \"file\",\n      id: \"exampleCustomFileBrowser\",\n      accept: \"image/x-png,image/gif,image/jpeg\",\n      name: \"customFile\",\n      multiple: true,\n      onChange: e => this._handleImageChange(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"hidden\",\n      id: \"user_image\",\n      name: \"user_image\",\n      class: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }))))), React.createElement(CardFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"buttom\",\n      size: \"sm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, \" Back \")), React.createElement(Button, {\n      type: \"button\",\n      onClick: this.uploadImage,\n      size: \"sm\",\n      color: \"danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \" Reset\"), React.createElement(Button, {\n      type: \"submit\",\n      size: \"sm\",\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \"Save\")))))));\n  }\n\n}\n\nexport default UserUpdate;","map":{"version":3,"sources":["C:/Users/s044/Documents/revel-market-backend/src/views/User/update.js"],"names":["React","Component","GOBALS","Form","FormGroup","Button","Card","CardHeader","Col","Row","CardBody","Label","Input","CardFooter","CustomInput","swal","Link","UserModel","UploadModel","user_model","upload_model","UserUpdate","constructor","props","state","file","imagePreviewUrl","upload_url","user_image","uploadImage","bind","handleSubmit","componentDidMount","user_code","match","params","user_bycode","getUserByUserCode","user","data","document","getElementById","value","user_name","user_lastname","user_email","user_tel","user_username","user_password","user_address","setState","formData","FormData","res","name","split","append","length","res_upload","uploadFile","deleteImage","url","fileDelete","event","preventDefault","arr","title","text","icon","button","image_name","upload_result","comment_photo_url","updateUserByUserCode","query_result","history","push","window","confirm","_handleImageChange","e","reader","FileReader","target","files","undefined","onloadend","result","readAsDataURL","render","justifyContent","URL_IMG"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport GOBALS from '../../GOBALS';\r\n\r\nimport {\r\n  Form, FormGroup, Button,\r\n  Card, CardHeader, Col,\r\n  Row, CardBody, Label,\r\n  Input, CardFooter,\r\n  CustomInput\r\n} from 'reactstrap';\r\nimport swal from 'sweetalert';\r\nimport { Link } from 'react-router-dom';\r\nimport UserModel from '../../models/UserModel';\r\nimport UploadModel from '../../models/UploadModel';\r\n\r\n\r\nvar user_model = new UserModel;\r\nvar upload_model = new UploadModel;\r\n\r\nclass UserUpdate extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      file: null,\r\n      imagePreviewUrl: '',\r\n      upload_url: 'user',\r\n      user_image: ''\r\n    };\r\n    this.uploadImage = this.uploadImage.bind(this)\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const user_code = this.props.match.params.user_code;\r\n    const user_bycode = await user_model.getUserByUserCode({ user_code: user_code });\r\n    let user = user_bycode.data[0]\r\n    document.getElementById(\"user_code\").value = user.user_code\r\n    document.getElementById(\"user_name\").value = user.user_name;\r\n    document.getElementById(\"user_lastname\").value = user.user_lastname;\r\n    document.getElementById(\"user_email\").value = user.user_email;\r\n    document.getElementById(\"user_tel\").value = user.user_tel;\r\n    document.getElementById(\"user_username\").value = user.user_username;\r\n    document.getElementById(\"user_password\").value = user.user_password;\r\n    document.getElementById(\"user_address\").value = user.user_address;\r\n    document.getElementById(\"user_image\").value = user.user_image;\r\n\r\n    var user_image = 'no-image.jpg'\r\n    if (user.user_image != '') {\r\n      user_image = user.user_image\r\n    }\r\n    this.setState({\r\n      user_image: user_image\r\n    })\r\n  }\r\n\r\n  async uploadImage(file, upload_url) {\r\n    const formData = new FormData();\r\n    var res = file.name.split(\".\");\r\n    formData.append('file_type', '.' + res[res.length - 1]);\r\n    formData.append('upload_url', upload_url);\r\n    formData.append('files', file);\r\n    var res_upload = await upload_model.uploadFile(formData);\r\n    return res_upload;\r\n  }\r\n\r\n  async deleteImage(url) {\r\n    await upload_model.fileDelete(url);\r\n  }\r\n\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    var arr = {};\r\n    var user_code = document.getElementById(\"user_code\").value;\r\n    var user_name = document.getElementById(\"user_name\").value;\r\n    var user_lastname = document.getElementById(\"user_lastname\").value;\r\n    var user_email = document.getElementById(\"user_email\").value;\r\n    var user_tel = document.getElementById(\"user_tel\").value;\r\n    var user_username = document.getElementById(\"user_username\").value;\r\n    var user_password = document.getElementById(\"user_password\").value;\r\n    var user_address = document.getElementById(\"user_address\").value;\r\n    if (user_name == '') {\r\n      swal({\r\n        title: \"Warning!\",\r\n        text: \"Please Enter Your Name \",\r\n        icon: \"warning\",\r\n        button: \"Close\",\r\n      });\r\n\r\n    } else if (user_lastname == '') {\r\n      swal({\r\n        title: \"Warning!\",\r\n        text: \"Please Enter Your Lastname \",\r\n        icon: \"warning\",\r\n        button: \"Close\",\r\n      });\r\n    } else if (user_email == '') {\r\n      swal({\r\n        title: \"Warning!\",\r\n        text: \"Please Enter Your email \",\r\n        icon: \"warning\",\r\n        button: \"Close\",\r\n      });\r\n    } else if (user_password == '') {\r\n      swal({\r\n        title: \"Warning!\",\r\n        text: \"Please Enter Your Password \",\r\n        icon: \"warning\",\r\n        button: \"Close\",\r\n      });\r\n    } else {\r\n      var user_image = document.getElementById(\"user_image\").value;\r\n      if (this.state.file != null) {\r\n        var image_name = await this.uploadImage(this.state.file, this.state.upload_url);\r\n        if (image_name.upload_result) {\r\n          await this.deleteImage(user_image);\r\n          user_image = image_name.comment_photo_url\r\n\r\n        }\r\n      }\r\n      arr['user_code'] = user_code;\r\n      arr['user_name'] = user_name;\r\n      arr['user_lastname'] = user_lastname;\r\n      arr['user_email'] = user_email;\r\n      arr['user_tel'] = user_tel;\r\n      arr['user_username'] = user_username;\r\n      arr['user_password'] = user_password;\r\n      arr['user_address'] = user_address;\r\n      arr['user_image'] = user_image;\r\n      const user = await user_model.updateUserByUserCode(arr);\r\n      if (user.query_result == true) {\r\n        swal(\"Save success!\", {\r\n          icon: \"success\",\r\n        });\r\n        this.props.history.push('/user');\r\n      } else {\r\n        window.confirm(\"เพิ่มข้อมูลไม่สำเร็จ\")\r\n      }\r\n    }\r\n  }\r\n\r\n  _handleImageChange(e) {\r\n    e.preventDefault();\r\n    let reader = new FileReader();\r\n    let file = e.target.files[0];\r\n    if (file != undefined) {\r\n      reader.onloadend = () => {\r\n        this.setState({\r\n          file: file,\r\n          imagePreviewUrl: reader.result,\r\n        });\r\n      }\r\n      reader.readAsDataURL(file)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { imagePreviewUrl } = this.state\r\n    return (\r\n      <div class=\"animated fadeIn\">\r\n        <Row>\r\n          <Col>\r\n            <Card>\r\n              <Form onSubmit={this.handleSubmit} id=\"myForm\">\r\n                <CardHeader>\r\n                  แก้ไขผู้ใช้งาน / Edit User\r\n                </CardHeader>\r\n                <CardBody>\r\n                  <FormGroup row>\r\n                    <Col lg=\"3\">\r\n                      <FormGroup>\r\n                        <Label>ชื่อ / Name <font color=\"#F00\"><b>*</b></font></Label>\r\n                        <Input type=\"hidden\" id=\"user_code\" name=\"user_code\" class=\"form-control\" />\r\n                        <Input type=\"text\" id=\"user_name\" name=\"user_name\" class=\"form-control\" />\r\n                        <p class=\"help-block\">Example : วินัย.</p>\r\n                      </FormGroup>\r\n                    </Col>\r\n                    <Col lg=\"3\">\r\n                      <FormGroup>\r\n                        <Label>นามสกุล / Lastname <font color=\"#F00\"><b>*</b></font></Label>\r\n                        <Input type=\"text\" id=\"user_lastname\" name=\"user_lastname\" class=\"form-control\" />\r\n                        <p class=\"help-block\">Example : ชาญชัย.</p>\r\n                      </FormGroup>\r\n                    </Col>\r\n                    <Col lg=\"3\">\r\n                      <FormGroup>\r\n                        <Label> อีเมล์ / Email </Label>\r\n                        <Input type=\"text\" id=\"user_email\" name=\"user_email\" type=\"email\" class=\"form-control\" />\r\n                        <p class=\"help-block\">Example : admin@revelsoft.co.th.</p>\r\n                      </FormGroup>\r\n                    </Col>\r\n                    <Col lg=\"3\">\r\n                      <FormGroup>\r\n                        <Label>โทรศัพท์ / Mobile </Label>\r\n                        <Input type=\"text\" id=\"user_tel\" name=\"user_tel\" type=\"text\" class=\"form-control\" />\r\n                        <p class=\"help-block\">Example : 0610243003.</p>\r\n                      </FormGroup>\r\n                    </Col>\r\n                    <Col lg=\"3\">\r\n                      <FormGroup>\r\n                        <Label>ยูสเซอร์ / Username <font color=\"#F00\"><b>*</b></font></Label>\r\n                        <Input type=\"text\" id=\"user_username\" name=\"user_username\" class=\"form-control\" />\r\n                        <p id=\"alert_user_username\" class=\"help-block\">Example : thana.</p>\r\n                      </FormGroup>\r\n                    </Col>\r\n                    <Col lg=\"3\">\r\n                      <FormGroup>\r\n                        <Label>รหัสผ่าน / Password <font color=\"#F00\"><b>*</b></font></Label>\r\n                        <Input type=\"text\" id=\"user_password\" name=\"user_password\" type=\"password\" class=\"form-control\" />\r\n                        <p id=\"alert_user_password\" class=\"help-block\">Example : thanaadmin.</p>\r\n                      </FormGroup>\r\n                    </Col>\r\n                  </FormGroup>\r\n                  <FormGroup row>\r\n                    <Col lg=\"12\">\r\n                      <FormGroup>\r\n                        <Label>ที่อยู่ / Address <font color=\"#F00\"><b>*</b></font> </Label>\r\n                        <Input type=\"textarea\" id=\"user_address\" name=\"user_address\" class=\"form-control\" />\r\n                        <p class=\"help-block\">Example : 271/55.</p>\r\n                      </FormGroup>\r\n                    </Col>\r\n                  </FormGroup>\r\n                  <FormGroup row style={{ justifyContent: 'center' }}>\r\n                    <Col lg=\"6\" >\r\n                      <FormGroup>\r\n                        <Label>อัพโหลดภาพ</Label>\r\n                        {imagePreviewUrl != '' ?\r\n                          <img className=\"imgesupload\" src={imagePreviewUrl} />\r\n                          :\r\n                          <img className=\"imgesupload\" src={GOBALS.URL_IMG + this.state.user_image} />}\r\n                        <CustomInput key=\"key\" type=\"file\" id=\"exampleCustomFileBrowser\" accept=\"image/x-png,image/gif,image/jpeg\" name=\"customFile\" multiple onChange={(e) => this._handleImageChange(e)} />\r\n                        <Input type=\"hidden\" id=\"user_image\" name=\"user_image\" class=\"form-control\" />\r\n                      </FormGroup>\r\n                    </Col>\r\n                  </FormGroup>\r\n\r\n\r\n                </CardBody>\r\n                <CardFooter>\r\n                  <Link to=\"/user\"><Button type=\"buttom\" size=\"sm\" > Back </Button></Link>\r\n                  <Button type=\"button\" onClick={this.uploadImage} size=\"sm\" color=\"danger\"> Reset</Button>\r\n                  <Button type=\"submit\" size=\"sm\" color=\"primary\">Save</Button>\r\n                </CardFooter>\r\n              </Form>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default UserUpdate;\r\n\r\n"]},"metadata":{},"sourceType":"module"}