{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\s044\\\\Documents\\\\revel-market-backend\\\\src\\\\views\\\\Shop\\\\update.js\";\nimport React, { Component } from 'react';\nimport { Form, FormGroup, Button, Card, CardHeader, Col, Row, CardBody, Label, Input, CardFooter, CustomInput } from 'reactstrap';\nimport swal from 'sweetalert';\nimport { Link } from 'react-router-dom';\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\nimport ImgDefault from '../../assets/img/default-image.jpg';\nimport GOBALS from '../../GOBALS';\nimport ShopModel from '../../models/ShopModel';\nimport UploadModel from '../../models/UploadModel';\nvar shop_model = new ShopModel();\nvar upload_model = new UploadModel();\n\nclass ShopUpdate extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shop_image_name: '',\n      shop_code: null,\n      file: null,\n      imagePreviewUrl: '',\n      upload_url: 'shop',\n      position_marker: {\n        lat: null,\n        lng: null\n      },\n      show: false\n    };\n    this.uploadImage = this.uploadImage.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.mapClicked = this.mapClicked.bind(this);\n  }\n\n  async uploadImage(file, upload_url) {\n    const formData = new FormData();\n    var res = file.name.split(\".\");\n    formData.append('file_type', '.' + res[res.length - 1]);\n    formData.append('upload_url', upload_url);\n    formData.append('files', file);\n    var res_upload = await upload_model.uploadFile(formData);\n    return res_upload;\n  }\n\n  async componentDidMount() {\n    const shop_code = this.props.match.params.shop_code;\n    const shop_by_code = await shop_model.getShopByShopCode({\n      shop_code: shop_code\n    });\n    console.log(shop_by_code);\n    let shop = shop_by_code.data[0];\n    document.getElementById(\"shop_name\").value = shop.shop_name;\n    document.getElementById(\"shop_tel\").value = shop.shop_tel;\n    document.getElementById(\"shop_detail\").value = shop.shop_detail;\n    document.getElementById(\"shop_address\").value = shop.shop_address;\n    document.getElementById(\"shop_description\").value = shop.shop_description;\n    var shop_image = 'no-image.jpg';\n\n    if (shop.shop_image_name != '') {\n      shop_image = shop.shop_image_name;\n    }\n\n    this.setState({\n      show: true,\n      shop_code: shop.shop_code,\n      shop_image_name: shop_image,\n      position_marker: {\n        lat: shop.shop_latitude,\n        lng: shop.shop_longitude\n      }\n    });\n  }\n\n  _handleImageChange(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    if (file != undefined) {\n      reader.onloadend = () => {\n        this.setState({\n          file: file,\n          imagePreviewUrl: reader.result\n        });\n      };\n\n      reader.readAsDataURL(file);\n    }\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    let _this$state = this.state,\n        position_marker = _this$state.position_marker,\n        shop_code = _this$state.shop_code,\n        shop_image_name = _this$state.shop_image_name;\n    var arr = {}; // var shop_code = document.getElementById(\"shop_code\").value;\n\n    var shop_name = document.getElementById(\"shop_name\").value;\n    var shop_tel = document.getElementById(\"shop_tel\").value;\n    var shop_detail = document.getElementById(\"shop_detail\").value;\n    var shop_address = document.getElementById(\"shop_address\").value;\n    var shop_description = document.getElementById(\"shop_description\").value;\n\n    if (shop_name == '') {\n      swal({\n        title: \"Warning!\",\n        text: \"Please Enter Your Name \",\n        icon: \"warning\",\n        button: \"Close\"\n      });\n    } else if (shop_name == '') {\n      swal({\n        title: \"Warning!\",\n        text: \"Please Enter Your Lastname \",\n        icon: \"warning\",\n        button: \"Close\"\n      });\n    } else {\n      var shop_image = '';\n\n      if (this.state.file != null) {\n        var image_name = await this.uploadImage(this.state.file, this.state.upload_url);\n\n        if (image_name.upload_result) {\n          shop_image = image_name.comment_photo_url;\n        }\n      } else {\n        shop_image = shop_image_name;\n      }\n\n      arr['shop_name'] = shop_name;\n      arr['shop_code'] = shop_code;\n      arr['shop_tel'] = shop_tel;\n      arr['shop_detail'] = shop_detail;\n      arr['shop_address'] = shop_address;\n      arr['shop_latitude'] = position_marker.lat;\n      arr['shop_longitude'] = position_marker.lng;\n      arr['shop_image_name'] = shop_image;\n      arr['shop_description'] = shop_description;\n      const shop = await shop_model.updateShopByShopCode(arr);\n      console.log(shop);\n\n      if (shop.query_result == true) {\n        swal(\"Save success!\", {\n          icon: \"success\"\n        });\n        this.props.history.push('/shop');\n      } else {\n        window.confirm(\"เพิ่มข้อมูลไม่สำเร็จ\");\n      }\n    }\n  }\n\n  mapClicked(mapProps, map, ev) {\n    const location = ev.latLng;\n    this.setState({\n      position_marker: {\n        lat: location.lat(),\n        lng: location.lng()\n      }\n    });\n  }\n\n  render() {\n    let _this$state2 = this.state,\n        shop_code = _this$state2.shop_code,\n        position_marker = _this$state2.position_marker,\n        imagePreviewUrl = _this$state2.imagePreviewUrl,\n        show = _this$state2.show;\n    return React.createElement(\"div\", {\n      className: \"animated fadeIn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      id: \"myForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(CardHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"\\u0E40\\u0E40\\u0E01\\u0E49\\u0E44\\u0E02\\u0E23\\u0E49\\u0E32\\u0E19 / Update Shop\"), React.createElement(CardBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      row: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"4\",\n      className: \"img-upload-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(Label, {\n      className: \"label-upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"\\u0E2D\\u0E31\\u0E1E\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E20\\u0E32\\u0E1E\"), imagePreviewUrl != '' ? React.createElement(\"img\", {\n      className: \"img-upload\",\n      src: imagePreviewUrl,\n      style: {},\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }) : React.createElement(\"img\", {\n      className: \"img-upload\",\n      src: GOBALS.URL_IMG + this.state.shop_image_name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }), React.createElement(CustomInput, {\n      key: \"key\",\n      type: \"file\",\n      id: \"exampleCustomFileBrowser\",\n      accept: \"image/x-png,image/gif,image/jpeg\",\n      name: \"customFile\",\n      multiple: true,\n      onChange: e => this._handleImageChange(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    })), React.createElement(Col, {\n      lg: \"8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      row: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E23\\u0E49\\u0E32\\u0E19 / Shop Name \", React.createElement(\"font\", {\n      color: \"#F00\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"*\"))), React.createElement(Input, {\n      type: \"text\",\n      id: \"shop_name\",\n      name: \"shop_name\",\n      class: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      class: \"help-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Example : \\u0E27\\u0E34\\u0E19\\u0E31\\u0E22.\"))), React.createElement(Col, {\n      lg: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, \"\\u0E42\\u0E17\\u0E23\\u0E28\\u0E31\\u0E1E\\u0E17\\u0E4C / Mobile \", React.createElement(\"font\", {\n      color: \"#F00\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, \"*\"))), React.createElement(Input, {\n      type: \"text\",\n      id: \"shop_tel\",\n      name: \"shop_tel\",\n      class: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      class: \"help-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"Example : \\u0E0A\\u0E32\\u0E0D\\u0E0A\\u0E31\\u0E22.\")))), React.createElement(FormGroup, {\n      row: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"\\u0E04\\u0E33\\u0E2D\\u0E18\\u0E34\\u0E1A\\u0E32\\u0E22\\u0E02\\u0E2D\\u0E07\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32 / Shop Description \", React.createElement(\"font\", {\n      color: \"#F00\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"*\")), \" \"), React.createElement(Input, {\n      type: \"textarea\",\n      id: \"shop_description\",\n      name: \"shop_description\",\n      class: \"form-control\",\n      rows: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      class: \"help-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, \"Example :.\"))), React.createElement(Col, {\n      lg: \"6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14 / Detail \", React.createElement(\"font\", {\n      color: \"#F00\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \"*\")), \" \"), React.createElement(Input, {\n      type: \"textarea\",\n      id: \"shop_detail\",\n      name: \"shop_detail\",\n      class: \"form-control\",\n      rows: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      class: \"help-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"Example :.\")))), React.createElement(FormGroup, {\n      row: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48 / Address \", React.createElement(\"font\", {\n      color: \"#F00\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"*\")), \" \"), React.createElement(Input, {\n      type: \"textarea\",\n      id: \"shop_address\",\n      name: \"shop_address\",\n      class: \"form-control\",\n      rows: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      class: \"help-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"Example : 271/55.\")))))), React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(Col, {\n      md: \"12\",\n      lg: {\n        size: 6,\n        offset: 3\n      },\n      style: {\n        height: \"400px\",\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, show ? React.createElement(Map, {\n      google: this.props.google,\n      zoom: 14,\n      style: mapStyles,\n      initialCenter: {\n        lat: position_marker.lat != null ? position_marker.lat : 14.9722863,\n        lng: position_marker.lng != null ? position_marker.lng : 102.0946554\n      },\n      onClick: this.mapClicked,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, position_marker.lat != null && position_marker.lng != null ? React.createElement(Marker, {\n      position: position_marker,\n      draggable: true,\n      name: 'Current location' // mouseover={this.moveMarker}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }) : \"\") : \"\"))), React.createElement(CardFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/master/employee\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"buttom\",\n      size: \"sm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, \" Back \")), React.createElement(Button, {\n      type: \"reset\",\n      size: \"sm\",\n      color: \"danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, \" Reset\"), React.createElement(Button, {\n      type: \"submit\",\n      size: \"sm\",\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, \"Save\")))))));\n  }\n\n}\n\nconst mapStyles = {\n  width: '95%',\n  height: '100%',\n  position: 'relative'\n};\nexport default GoogleApiWrapper({\n  apiKey: \"AIzaSyAeM9FDyE4Eo9CWkydmq2wUmcum7FRnpx0\"\n})(ShopUpdate);","map":{"version":3,"sources":["C:/Users/s044/Documents/revel-market-backend/src/views/Shop/update.js"],"names":["React","Component","Form","FormGroup","Button","Card","CardHeader","Col","Row","CardBody","Label","Input","CardFooter","CustomInput","swal","Link","Map","InfoWindow","Marker","GoogleApiWrapper","ImgDefault","GOBALS","ShopModel","UploadModel","shop_model","upload_model","ShopUpdate","constructor","props","state","shop_image_name","shop_code","file","imagePreviewUrl","upload_url","position_marker","lat","lng","show","uploadImage","bind","handleSubmit","mapClicked","formData","FormData","res","name","split","append","length","res_upload","uploadFile","componentDidMount","match","params","shop_by_code","getShopByShopCode","console","log","shop","data","document","getElementById","value","shop_name","shop_tel","shop_detail","shop_address","shop_description","shop_image","setState","shop_latitude","shop_longitude","_handleImageChange","e","preventDefault","reader","FileReader","target","files","undefined","onloadend","result","readAsDataURL","event","arr","title","text","icon","button","image_name","upload_result","comment_photo_url","updateShopByShopCode","query_result","history","push","window","confirm","mapProps","map","ev","location","latLng","render","URL_IMG","size","offset","height","justifyContent","alignItems","google","mapStyles","width","position","apiKey"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {\r\n  Form, FormGroup, Button,\r\n  Card, CardHeader, Col,\r\n  Row, CardBody, Label,\r\n  Input, CardFooter, CustomInput\r\n} from 'reactstrap';\r\nimport swal from 'sweetalert';\r\nimport { Link } from 'react-router-dom';\r\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\r\nimport ImgDefault from '../../assets/img/default-image.jpg';\r\nimport GOBALS from '../../GOBALS';\r\nimport ShopModel from '../../models/ShopModel';\r\nimport UploadModel from '../../models/UploadModel';\r\n\r\nvar shop_model = new ShopModel;\r\nvar upload_model = new UploadModel;\r\nclass ShopUpdate extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      shop_image_name: '',\r\n      shop_code: null,\r\n      file: null,\r\n      imagePreviewUrl: '',\r\n      upload_url: 'shop',\r\n      position_marker: {\r\n        lat: null,\r\n        lng: null\r\n      },\r\n      show: false,\r\n    };\r\n    this.uploadImage = this.uploadImage.bind(this)\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n    this.mapClicked = this.mapClicked.bind(this)\r\n  }\r\n\r\n  async uploadImage(file, upload_url) {\r\n    const formData = new FormData();\r\n    var res = file.name.split(\".\");\r\n    formData.append('file_type', '.' + res[res.length - 1]);\r\n    formData.append('upload_url', upload_url);\r\n    formData.append('files', file);\r\n    var res_upload = await upload_model.uploadFile(formData);\r\n    return res_upload;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const shop_code = this.props.match.params.shop_code;\r\n    const shop_by_code = await shop_model.getShopByShopCode({ shop_code: shop_code });\r\n    console.log(shop_by_code);\r\n\r\n    let shop = shop_by_code.data[0]\r\n    document.getElementById(\"shop_name\").value = shop.shop_name;\r\n    document.getElementById(\"shop_tel\").value = shop.shop_tel;\r\n    document.getElementById(\"shop_detail\").value = shop.shop_detail;\r\n    document.getElementById(\"shop_address\").value = shop.shop_address;\r\n    document.getElementById(\"shop_description\").value = shop.shop_description;\r\n\r\n    var shop_image = 'no-image.jpg'\r\n\r\n    if (shop.shop_image_name != '') {\r\n      shop_image = shop.shop_image_name\r\n    }\r\n\r\n    this.setState({\r\n      show: true,\r\n      shop_code: shop.shop_code,\r\n      shop_image_name: shop_image,\r\n      position_marker: {\r\n        lat: shop.shop_latitude,\r\n        lng: shop.shop_longitude\r\n      }\r\n    })\r\n  }\r\n\r\n  _handleImageChange(e) {\r\n    e.preventDefault();\r\n    let reader = new FileReader();\r\n    let file = e.target.files[0];\r\n    if (file != undefined) {\r\n      reader.onloadend = () => {\r\n        this.setState({\r\n          file: file,\r\n          imagePreviewUrl: reader.result,\r\n        });\r\n      }\r\n      reader.readAsDataURL(file)\r\n    }\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    let { position_marker, shop_code, shop_image_name } = this.state\r\n    var arr = {};\r\n    // var shop_code = document.getElementById(\"shop_code\").value;\r\n    var shop_name = document.getElementById(\"shop_name\").value;\r\n    var shop_tel = document.getElementById(\"shop_tel\").value;\r\n    var shop_detail = document.getElementById(\"shop_detail\").value;\r\n    var shop_address = document.getElementById(\"shop_address\").value;\r\n    var shop_description = document.getElementById(\"shop_description\").value;\r\n\r\n\r\n    if (shop_name == '') {\r\n      swal({\r\n        title: \"Warning!\",\r\n        text: \"Please Enter Your Name \",\r\n        icon: \"warning\",\r\n        button: \"Close\",\r\n      });\r\n\r\n    } else if (shop_name == '') {\r\n      swal({\r\n        title: \"Warning!\",\r\n        text: \"Please Enter Your Lastname \",\r\n        icon: \"warning\",\r\n        button: \"Close\",\r\n      });\r\n    } else {\r\n\r\n      var shop_image = ''\r\n      if (this.state.file != null) {\r\n        var image_name = await this.uploadImage(this.state.file, this.state.upload_url);\r\n        if (image_name.upload_result) {\r\n          shop_image = image_name.comment_photo_url\r\n        }\r\n      } else {\r\n        shop_image = shop_image_name\r\n      }\r\n\r\n\r\n      arr['shop_name'] = shop_name;\r\n      arr['shop_code'] = shop_code;\r\n      arr['shop_tel'] = shop_tel;\r\n      arr['shop_detail'] = shop_detail;\r\n      arr['shop_address'] = shop_address;\r\n      arr['shop_latitude'] = position_marker.lat;\r\n      arr['shop_longitude'] = position_marker.lng;\r\n      arr['shop_image_name'] = shop_image\r\n      arr['shop_description'] = shop_description\r\n\r\n      const shop = await shop_model.updateShopByShopCode(arr);\r\n      console.log(shop);\r\n      if (shop.query_result == true) {\r\n        swal(\"Save success!\", {\r\n          icon: \"success\",\r\n        });\r\n        this.props.history.push('/shop');\r\n      } else {\r\n        window.confirm(\"เพิ่มข้อมูลไม่สำเร็จ\")\r\n      }\r\n    }\r\n  }\r\n\r\n  mapClicked(mapProps, map, ev) {\r\n    const location = ev.latLng;\r\n    this.setState({\r\n      position_marker: {\r\n        lat: location.lat(),\r\n        lng: location.lng()\r\n      }\r\n    })\r\n  }\r\n  render() {\r\n\r\n    let { shop_code, position_marker, imagePreviewUrl, show } = this.state\r\n\r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        <Row>\r\n          <Col>\r\n            <Card>\r\n              <Form onSubmit={this.handleSubmit} id=\"myForm\">\r\n                <CardHeader>\r\n                  เเก้ไขร้าน / Update Shop\r\n                </CardHeader>\r\n                <CardBody>\r\n                  <FormGroup row>\r\n                    <Col lg=\"4\" className='img-upload-box'>\r\n                      <Label className=\"label-upload\">อัพโหลดภาพ</Label>\r\n                      {imagePreviewUrl != '' ?\r\n                        <img className=\"img-upload\" src={imagePreviewUrl} style={{}} />\r\n                        :\r\n                        <img className=\"img-upload\" src={GOBALS.URL_IMG + this.state.shop_image_name} />\r\n                      }\r\n                      <CustomInput key=\"key\" type=\"file\" id=\"exampleCustomFileBrowser\" accept=\"image/x-png,image/gif,image/jpeg\" name=\"customFile\" multiple onChange={(e) => this._handleImageChange(e)} />\r\n                    </Col>\r\n                    <Col lg=\"8\">\r\n                      <FormGroup row>\r\n                        <Col lg=\"6\">\r\n                          <FormGroup>\r\n                            <Label>ชื่อร้าน / Shop Name <font color=\"#F00\"><b>*</b></font></Label>\r\n                            <Input type=\"text\" id=\"shop_name\" name=\"shop_name\" class=\"form-control\" />\r\n                            <p class=\"help-block\">Example : วินัย.</p>\r\n                          </FormGroup>\r\n                        </Col>\r\n                        <Col lg=\"\">\r\n                          <FormGroup>\r\n                            <Label>โทรศัพท์ / Mobile <font color=\"#F00\"><b>*</b></font></Label>\r\n                            <Input type=\"text\" id=\"shop_tel\" name=\"shop_tel\" class=\"form-control\" />\r\n                            <p class=\"help-block\">Example : ชาญชัย.</p>\r\n                          </FormGroup>\r\n                        </Col>\r\n                      </FormGroup>\r\n                      <FormGroup row>\r\n                        <Col lg=\"6\">\r\n                          <FormGroup>\r\n                            <Label>คำอธิบายของร้านค้า / Shop Description <font color=\"#F00\"><b>*</b></font> </Label>\r\n                            <Input type=\"textarea\" id=\"shop_description\" name=\"shop_description\" class=\"form-control\" rows=\"5\" />\r\n                            <p class=\"help-block\">Example :.</p>\r\n                          </FormGroup>\r\n                        </Col>\r\n                        <Col lg=\"6\">\r\n                          <FormGroup>\r\n                            <Label>รายละเอียด / Detail <font color=\"#F00\"><b>*</b></font> </Label>\r\n                            <Input type=\"textarea\" id=\"shop_detail\" name=\"shop_detail\" class=\"form-control\" rows=\"5\" />\r\n                            <p class=\"help-block\">Example :.</p>\r\n                          </FormGroup>\r\n                        </Col>\r\n                      </FormGroup>\r\n                      <FormGroup row>\r\n                        <Col lg=\"12\">\r\n                          <FormGroup>\r\n                            <Label>ที่อยู่ / Address <font color=\"#F00\"><b>*</b></font> </Label>\r\n                            <Input type=\"textarea\" id=\"shop_address\" name=\"shop_address\" class=\"form-control\" rows=\"5\" />\r\n                            <p class=\"help-block\">Example : 271/55.</p>\r\n                          </FormGroup>\r\n                        </Col>\r\n                      </FormGroup>\r\n                    </Col>\r\n                  </FormGroup>\r\n                  <FormGroup>\r\n                    <Col md=\"12\" lg={{ size: 6, offset: 3 }} style={{ height: \"400px\", justifyContent: 'center', alignItems: 'center', }}>\r\n                      {show ?\r\n                        <Map\r\n                          google={this.props.google}\r\n                          zoom={14}\r\n                          style={mapStyles}\r\n                          initialCenter={{\r\n                            lat: position_marker.lat != null ? position_marker.lat : 14.9722863,\r\n                            lng: position_marker.lng != null ? position_marker.lng : 102.0946554\r\n                          }}\r\n                          onClick={this.mapClicked}\r\n                        >\r\n                          {position_marker.lat != null && position_marker.lng != null ?\r\n                            <Marker\r\n                              position={position_marker}\r\n                              draggable={true}\r\n                              name={'Current location'}\r\n                            // mouseover={this.moveMarker}\r\n                            />\r\n                            : \"\"\r\n                          }\r\n                        </Map>\r\n                        : \"\"}\r\n                    </Col>\r\n                  </FormGroup>\r\n                </CardBody>\r\n                <CardFooter>\r\n                  <Link to=\"/master/employee\"><Button type=\"buttom\" size=\"sm\" > Back </Button></Link>\r\n                  <Button type=\"reset\" size=\"sm\" color=\"danger\"> Reset</Button>\r\n                  <Button type=\"submit\" size=\"sm\" color=\"primary\">Save</Button>\r\n                </CardFooter>\r\n              </Form>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nconst mapStyles = {\r\n  width: '95%',\r\n  height: '100%',\r\n  position: 'relative'\r\n};\r\n\r\nexport default GoogleApiWrapper({\r\n  apiKey: (\"AIzaSyAeM9FDyE4Eo9CWkydmq2wUmcum7FRnpx0\")\r\n})(ShopUpdate);\r\n\r\n"]},"metadata":{},"sourceType":"module"}